<svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
    <style>
        text { font-family: Inter, 'Segoe UI', sans-serif; }
    </style>
    
    <!-- Title -->
    <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="600" fill="#667eea">
        The Three-Layer Model (MVVM)
    </text>
    <text x="400" y="48" text-anchor="middle" font-size="11" fill="#94a3b8">
        Data flows down, events flow up
    </text>
    
    <!-- Layer 1: Data Model -->
    <rect x="50" y="80" width="700" height="90" rx="8" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
    <text x="80" y="105" font-size="14" font-weight="600" fill="#22c55e">Layer 1: data.model</text>
    <text x="80" y="122" font-size="10" fill="#94a3b8">Raw application data — no formatting, no display concerns</text>
    
    <!-- Example properties -->
    <rect x="80" y="132" width="150" height="28" rx="4" fill="#0f172a"/>
    <text x="90" y="150" font-size="9" fill="#22c55e" font-family="monospace">selected_date: Date</text>
    
    <rect x="245" y="132" width="140" height="28" rx="4" fill="#0f172a"/>
    <text x="255" y="150" font-size="9" fill="#22c55e" font-family="monospace">price: 42.00</text>
    
    <rect x="400" y="132" width="140" height="28" rx="4" fill="#0f172a"/>
    <text x="410" y="150" font-size="9" fill="#22c55e" font-family="monospace">is_active: true</text>
    
    <rect x="555" y="132" width="170" height="28" rx="4" fill="#0f172a"/>
    <text x="565" y="150" font-size="9" fill="#22c55e" font-family="monospace">temperature: 22.5</text>
    
    <!-- Arrow: Data Model → View Model -->
    <g transform="translate(400, 178)">
        <line x1="0" y1="0" x2="0" y2="30" stroke="#f59e0b" stroke-width="2"/>
        <polygon points="-6,24 6,24 0,32" fill="#f59e0b"/>
        <text x="15" y="12" font-size="9" fill="#f59e0b">bindings</text>
        <text x="15" y="24" font-size="9" fill="#f59e0b">transforms</text>
    </g>
    
    <!-- Event arrow up -->
    <g transform="translate(200, 178)">
        <line x1="0" y1="30" x2="0" y2="0" stroke="#ef4444" stroke-width="2"/>
        <polygon points="-6,6 6,6 0,-2" fill="#ef4444"/>
        <text x="15" y="12" font-size="9" fill="#ef4444">change</text>
        <text x="15" y="24" font-size="9" fill="#ef4444">events ↑</text>
    </g>
    
    <!-- Layer 2: View-Model -->
    <rect x="50" y="220" width="700" height="90" rx="8" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="80" y="245" font-size="14" font-weight="600" fill="#f59e0b">Layer 2: view.data.model</text>
    <text x="80" y="262" font-size="10" fill="#94a3b8">Display-ready strings, CSS classes, computed flags</text>
    
    <!-- Example properties -->
    <rect x="80" y="272" width="170" height="28" rx="4" fill="#0f172a"/>
    <text x="90" y="290" font-size="9" fill="#f59e0b" font-family="monospace">date_label: "Feb 11"</text>
    
    <rect x="265" y="272" width="140" height="28" rx="4" fill="#0f172a"/>
    <text x="275" y="290" font-size="9" fill="#f59e0b" font-family="monospace">price: "$42.00"</text>
    
    <rect x="420" y="272" width="150" height="28" rx="4" fill="#0f172a"/>
    <text x="430" y="290" font-size="9" fill="#f59e0b" font-family="monospace">status_class: "on"</text>
    
    <rect x="585" y="272" width="140" height="28" rx="4" fill="#0f172a"/>
    <text x="595" y="290" font-size="9" fill="#f59e0b" font-family="monospace">temp: "72.5°F"</text>
    
    <!-- Arrow: View Model → DOM -->
    <g transform="translate(400, 318)">
        <line x1="0" y1="0" x2="0" y2="30" stroke="#3b82f6" stroke-width="2"/>
        <polygon points="-6,24 6,24 0,32" fill="#3b82f6"/>
        <text x="15" y="12" font-size="9" fill="#3b82f6">watchers</text>
        <text x="15" y="24" font-size="9" fill="#3b82f6">DOM update</text>
    </g>
    
    <!-- Event arrow up -->
    <g transform="translate(200, 318)">
        <line x1="0" y1="30" x2="0" y2="0" stroke="#ef4444" stroke-width="2"/>
        <polygon points="-6,6 6,6 0,-2" fill="#ef4444"/>
        <text x="15" y="12" font-size="9" fill="#ef4444">user</text>
        <text x="15" y="24" font-size="9" fill="#ef4444">input ↑</text>
    </g>
    
    <!-- Layer 3: DOM -->
    <rect x="50" y="360" width="700" height="70" rx="8" fill="#0f172a" stroke="#3b82f6" stroke-width="2"/>
    <text x="80" y="385" font-size="14" font-weight="600" fill="#3b82f6">Layer 3: DOM (view.ui)</text>
    <text x="80" y="402" font-size="10" fill="#94a3b8">HTML elements, CSS classes, visual rendering, user events</text>
    
    <text x="80" y="420" font-size="9" fill="#f1f5f9" font-family="monospace">
        &lt;div class="month-view"&gt;&lt;span class="selected"&gt;11&lt;/span&gt; &lt;span&gt;$42.00&lt;/span&gt; &lt;span class="on"&gt;●&lt;/span&gt;&lt;/div&gt;
    </text>
    
    <!-- Key principle callout -->
    <rect x="580" y="172" width="170" height="44" rx="6" fill="#0f172a" stroke="#667eea" stroke-width="1" stroke-dasharray="4"/>
    <text x="665" y="190" text-anchor="middle" font-size="9" font-weight="600" fill="#667eea">Key Principle</text>
    <text x="665" y="204" text-anchor="middle" font-size="8" fill="#94a3b8">Layers NEVER skip — always</text>
    <text x="665" y="214" text-anchor="middle" font-size="8" fill="#94a3b8">data → viewmodel → DOM</text>
    
    <!-- Footer -->
    <text x="400" y="448" text-anchor="middle" font-size="10" fill="#64748b">
        jsgui3-html Control Design Book — Chapter 4 Reference
    </text>
</svg>
